<!DOCTYPE html>
<html>
    <head>
        <title>Badger Quest : Home Server, Part 4: Docker Networks</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Badger Quest</a></span>
                            </li>
                                                    <li>
                                <span><a href="Badger-Quest_229581.html">Badger Quest</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home-Server_720897.html">Home Server</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Badger Quest : Home Server, Part 4: Docker Networks
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Lauren Barger</span>, last modified on Oct 18, 2022
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="contentLayout2">
<div class="columnLayout fixed-width" data-layout="fixed-width">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>At the moment, I’ve sort of thrown together my home server. I’ve found I’ve got a fairly standardised knowledge of Docker, containers and networking. But this wouldn’t be fun if I didn’t learn anything while setting up all these toys. </p><p>It also turns out that Docker networks are extremely cool. </p><h1 id="HomeServer,Part4:DockerNetworks-TableofContents">Table of Contents</h1><style type='text/css'>/*<![CDATA[*/
div.rbtoc1668153850111 {padding: 0px;}
div.rbtoc1668153850111 ul {list-style: none;margin-left: 0px;}
div.rbtoc1668153850111 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1668153850111'>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>1</span> <a href='#HomeServer,Part4:DockerNetworks-DockerNetworks'>Docker Networks</a></li>
<li><span class='TOCOutline'>2</span> <a href='#HomeServer,Part4:DockerNetworks-Network1:Thedefaultbridge.'>Network 1: The default bridge.</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>2.1</span> <a href='#HomeServer,Part4:DockerNetworks-DefaultContainerNetworks.'>Default Container Networks.</a></li>
<li><span class='TOCOutline'>2.2</span> <a href='#HomeServer,Part4:DockerNetworks-Anobligatoryinfographic.'>An obligatory infographic.</a></li>
<li><span class='TOCOutline'>2.3</span> <a href='#HomeServer,Part4:DockerNetworks-DockernetworkDHCPandDNS.'>Docker network DHCP and DNS.</a></li>
</ul>
</li>
<li><span class='TOCOutline'>3</span> <a href='#HomeServer,Part4:DockerNetworks-Network2:User-definedbridge.'>Network 2: User-defined bridge.</a></li>
<li><span class='TOCOutline'>4</span> <a href='#HomeServer,Part4:DockerNetworks-Conclusion'>Conclusion</a></li>
<li><span class='TOCOutline'>5</span> <a href='#HomeServer,Part4:DockerNetworks-References'>References</a></li>
</ul>
</div><h1 id="HomeServer,Part4:DockerNetworks-DockerNetworks">Docker Networks</h1><p>Docker has seven different network types and they’re as follows: </p><ol><li><p>Default bridge.</p></li><li><p>User-defined bridge. </p></li><li><p>MACVLAN</p></li><li><p>IPVLAN (L2)</p></li><li><p>IPVLAN (L3)</p></li><li><p>Overlay</p></li><li><p>None</p></li></ol><p>By default, a fresh Docker installation will be created with a default bridge, host network (MACVLAN) and a none network. </p><p>Using Docker Compose, the network setup will behave a little differently. In a Docker Compose setup, the directory that the docker-compose.yml is created in will create a network based on the name of that directory. </p><h1 id="HomeServer,Part4:DockerNetworks-Network1:Thedefaultbridge.">Network 1: The default bridge.</h1><p>I’ve already done some toying with my Docker instance. So at the moment, I’ve already established an additional network on my Docker host. </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">sudo docker network ls</pre>
</div></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">NETWORK ID     NAME          DRIVER    SCOPE
f4aa7ea18b56   bridge        bridge    local
b37f41df4666   host          host      local
de0434d61f14   none          null      local
3201469f0a8b   opt_default   bridge    local</pre>
</div></div><p>As you can see, besides the three default networks that ship with Docker (bridge, host, none), I’ve already created a new user-defined bridge network (coming later) called <strong>opt_default</strong>. </p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Network Driver here is equivalent to network type. There are seven! </p></div></div><h2 id="HomeServer,Part4:DockerNetworks-DefaultContainerNetworks.">Default Container Networks.</h2><p>But what about containers? How do they fit into the mix? Let’s take a look at the current state of our docker host network. </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">ip add show</pre>
</div></div><p><strong>Defaults:</strong></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eno1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 1c:69:7a:aa:53:72 brd ff:ff:ff:ff:ff:ff
    inet 192.168.0.10/24 brd 192.168.0.255 scope global eno1
       valid_lft forever preferred_lft forever
    inet6 fd01::1e69:7aff:feaa:5372/64 scope global dynamic mngtmpaddr noprefixroute 
       valid_lft 256sec preferred_lft 256sec
    inet6 fe80::1e69:7aff:feaa:5372/64 scope link 
       valid_lft forever preferred_lft forever
3: wlo2: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000
    link/ether 14:85:7f:84:de:1f brd ff:ff:ff:ff:ff:ff</pre>
</div></div><p><strong>Docker: </strong></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">4: br-3201469f0a8b: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default 
    link/ether 02:42:14:84:d9:08 brd ff:ff:ff:ff:ff:ff
    inet 172.18.0.1/16 brd 172.18.255.255 scope global br-3201469f0a8b
       valid_lft forever preferred_lft forever
    inet6 fe80::42:14ff:fe84:d908/64 scope link 
       valid_lft forever preferred_lft forever
5: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default 
    link/ether 02:42:11:37:4c:f4 brd ff:ff:ff:ff:ff:ff
    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
       valid_lft forever preferred_lft forever</pre>
</div></div><p><strong>Containers:</strong></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">35: vethd19a6be@if34: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-3201469f0a8b state UP group default 
    link/ether 66:5d:2c:a2:b2:91 brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet6 fe80::645d:2cff:fea2:b291/64 scope link 
       valid_lft forever preferred_lft forever
37: vetha60f0a8@if36: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-3201469f0a8b state UP group default 
    link/ether 02:d2:41:ff:9f:d9 brd ff:ff:ff:ff:ff:ff link-netnsid 13
    inet6 fe80::d2:41ff:feff:9fd9/64 scope link 
       valid_lft forever preferred_lft forever
39: veth7e8dabe@if38: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-3201469f0a8b state UP group default 
    link/ether 7a:87:f9:da:56:71 brd ff:ff:ff:ff:ff:ff link-netnsid 1
    inet6 fe80::7887:f9ff:feda:5671/64 scope link 
       valid_lft forever preferred_lft forever
41: veth4f400de@if40: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-3201469f0a8b state UP group default 
    link/ether d6:6e:2f:20:27:ed brd ff:ff:ff:ff:ff:ff link-netnsid 2
    inet6 fe80::d46e:2fff:fe20:27ed/64 scope link 
       valid_lft forever preferred_lft forever
45: vethe7f528a@if44: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-3201469f0a8b state UP group default 
    link/ether 1e:91:bf:9e:ba:c2 brd ff:ff:ff:ff:ff:ff link-netnsid 6
    inet6 fe80::1c91:bfff:fe9e:bac2/64 scope link 
       valid_lft forever preferred_lft forever
49: veth0ef0c37@if48: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-3201469f0a8b state UP group default 
    link/ether 9e:8b:eb:47:d9:55 brd ff:ff:ff:ff:ff:ff link-netnsid 12
    inet6 fe80::9c8b:ebff:fe47:d955/64 scope link 
       valid_lft forever preferred_lft forever
51: vethee41b69@if50: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-3201469f0a8b state UP group default 
    link/ether 5e:29:6c:95:b4:7e brd ff:ff:ff:ff:ff:ff link-netnsid 3
    inet6 fe80::5c29:6cff:fe95:b47e/64 scope link 
       valid_lft forever preferred_lft forever
53: vethb98cda4@if52: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-3201469f0a8b state UP group default 
    link/ether de:fb:2d:a4:d1:f1 brd ff:ff:ff:ff:ff:ff link-netnsid 10
    inet6 fe80::dcfb:2dff:fea4:d1f1/64 scope link 
       valid_lft forever preferred_lft forever
55: veth69f35d4@if54: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-3201469f0a8b state UP group default 
    link/ether 7e:b8:cd:37:0d:a8 brd ff:ff:ff:ff:ff:ff link-netnsid 11
    inet6 fe80::7cb8:cdff:fe37:da8/64 scope link 
       valid_lft forever preferred_lft forever
77: veth8b7b17e@if76: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-3201469f0a8b state UP group default 
    link/ether 1e:bf:bf:fb:d0:d3 brd ff:ff:ff:ff:ff:ff link-netnsid 4
    inet6 fe80::1cbf:bfff:fefb:d0d3/64 scope link 
       valid_lft forever preferred_lft forever
81: vetha5a2983@if80: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-3201469f0a8b state UP group default 
    link/ether 0a:c1:aa:78:6d:9a brd ff:ff:ff:ff:ff:ff link-netnsid 5
    inet6 fe80::8c1:aaff:fe78:6d9a/64 scope link 
       valid_lft forever preferred_lft forever</pre>
</div></div><p>That’s… a lot of connections.</p><p>For each container added, Docker will spin up a virtual ethernet connection for each of them and automatically connect them to the bridge they belong to. Running the following command will display the list of virtual ethernet interfaces (ie, container interfaces) and the bridge network they are connected to. </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">bridge link</pre>
</div></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">35: vethd19a6be@if34: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br-3201469f0a8b state forwarding priority 32 cost 2 
37: vetha60f0a8@if36: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br-3201469f0a8b state forwarding priority 32 cost 2 
39: veth7e8dabe@if38: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br-3201469f0a8b state forwarding priority 32 cost 2 
41: veth4f400de@if40: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br-3201469f0a8b state forwarding priority 32 cost 2 
45: vethe7f528a@if44: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br-3201469f0a8b state forwarding priority 32 cost 2 
49: veth0ef0c37@if48: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br-3201469f0a8b state forwarding priority 32 cost 2 
51: vethee41b69@if50: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br-3201469f0a8b state forwarding priority 32 cost 2 
53: vethb98cda4@if52: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br-3201469f0a8b state forwarding priority 32 cost 2 
55: veth69f35d4@if54: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br-3201469f0a8b state forwarding priority 32 cost 2 
77: veth8b7b17e@if76: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br-3201469f0a8b state forwarding priority 32 cost 2 
81: vetha5a2983@if80: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br-3201469f0a8b state forwarding priority 32 cost 2 </pre>
</div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Typically, the default bridge that Docker will connect these virtual ethernet connections to will be docker0. However, looks like I’ve overridden my default network bridge with the opt_docker bridge which has all my containers connected to it. </p></div></div><h2 id="HomeServer,Part4:DockerNetworks-Anobligatoryinfographic.">An obligatory infographic.</h2><p>Our Docker host has been configured with a bridge network. For each container added to the host, Docker creates a virtual ethernet interface and connects it to a bridge network. The virtual ethernet interface is then mapped to the eth0 port of each of the docker containers.</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/1212448/1015858.png" data-image-src="attachments/1212448/1015858.png" data-height="620" data-width="1760" data-unresolved-comment-count="0" data-linked-resource-id="1015858" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20220824-145909.png" data-base-url="https://badgerr.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1212448" data-linked-resource-container-version="10" data-media-id="472d18d9-e7e3-4a75-a783-e64ab0093e81" data-media-type="file"></span><h2 id="HomeServer,Part4:DockerNetworks-DockernetworkDHCPandDNS.">Docker network DHCP and DNS.</h2><p>Now, not only did the Docker bridge set up virtual ethernet interfaces, but it also created IP addresses for each of the containers. Which means our bridge is also hosting DHCP and DNS functionality. </p><p>Let’s take a look at the bridge that’s in use most in my setup, opt_default: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">docker inspect opt_default</pre>
</div></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">[
    {
        &quot;Name&quot;: &quot;opt_default&quot;,
        &quot;Id&quot;: &quot;3201469f0a8b9e82634d2d8255864988d59d011def8280711f7224d9e494a30d&quot;,
        &quot;Created&quot;: &quot;2022-05-17T07:30:17.828131539Z&quot;,
        &quot;Scope&quot;: &quot;local&quot;,
        &quot;Driver&quot;: &quot;bridge&quot;,
        &quot;EnableIPv6&quot;: false,
        &quot;IPAM&quot;: {
            &quot;Driver&quot;: &quot;default&quot;,
            &quot;Options&quot;: null,
            &quot;Config&quot;: [
                {
                    &quot;Subnet&quot;: &quot;172.18.0.0/16&quot;,
                    &quot;Gateway&quot;: &quot;172.18.0.1&quot;
                }
            ]
        },
        &quot;Internal&quot;: false,
        &quot;Attachable&quot;: true,
        &quot;Ingress&quot;: false,
        &quot;ConfigFrom&quot;: {
            &quot;Network&quot;: &quot;&quot;
        },
        &quot;ConfigOnly&quot;: false,
        &quot;Containers&quot;: {
            &quot;08b9979bb3095f2396303b79fb07e1f8e3cb69fa513e3ca5a44c4ce028be129b&quot;: {
                &quot;Name&quot;: &quot;mosquitto&quot;,
                &quot;EndpointID&quot;: &quot;43e3d38d74792996985a9a13db4002b1513539d0786ca9b44b8442085517fa88&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:12:00:08&quot;,
                &quot;IPv4Address&quot;: &quot;172.18.0.8/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            },
            &quot;0dee2e952d33176d7c6915797192f0849117baedad8bac3052b63418e7438167&quot;: {
                &quot;Name&quot;: &quot;komga&quot;,
                &quot;EndpointID&quot;: &quot;aaa82ad2454131f2810cbd10513727b9d452475af6f960e921d21f2c10c4b407&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:12:00:0b&quot;,
                &quot;IPv4Address&quot;: &quot;172.18.0.11/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            },
            &quot;34c65afa136f40b3eb20ae30ca4f234ab7018cdd297dac4ee5ea99a05bf10a24&quot;: {
                &quot;Name&quot;: &quot;radarr&quot;,
                &quot;EndpointID&quot;: &quot;8680225d6df02b347658c9fdac16dc5aa690919bbf1d275afac26e944fa0b36c&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:12:00:04&quot;,
                &quot;IPv4Address&quot;: &quot;172.18.0.4/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            },
            &quot;3ecb57003f0c2f5206f9f9d303b47bfa3eacdd3a4b80cc12f0507b9273ff28b4&quot;: {
                &quot;Name&quot;: &quot;portainer&quot;,
                &quot;EndpointID&quot;: &quot;fae29931be0cda98370e8a433e679a14b1b0a5a45d600fe230e7a2cf039ad094&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:12:00:05&quot;,
                &quot;IPv4Address&quot;: &quot;172.18.0.5/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            },
            &quot;4728bd569d671ece2f2a4efada7a92892216b5b8adb58428ea29aeea11f4a61c&quot;: {
                &quot;Name&quot;: &quot;sonarr&quot;,
                &quot;EndpointID&quot;: &quot;8aa9c58afb8298a5e33e8de7140fd7120f68bd1734461c404de8fba24448e4c0&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:12:00:07&quot;,
                &quot;IPv4Address&quot;: &quot;172.18.0.7/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            },
            &quot;62ba2a9ed3505463d8d31e121aa4f9f7f4a3ee29f24676245e40642e2c7bed15&quot;: {
                &quot;Name&quot;: &quot;duplicati&quot;,
                &quot;EndpointID&quot;: &quot;c90ae2e3c357272ac39d53055c3d848e920c09dfc6c46443693c04010b8335fa&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:12:00:0a&quot;,
                &quot;IPv4Address&quot;: &quot;172.18.0.10/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            },
            &quot;a438d9fec7c0cc3b2357c96eb3d02693fb525c3d15baa989a65d54c132e56d7b&quot;: {
                &quot;Name&quot;: &quot;deluge&quot;,
                &quot;EndpointID&quot;: &quot;618f0d4a1403d97274256ff44565be3d51dfb55d55fc5213360b88a79d2006c7&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:12:00:03&quot;,
                &quot;IPv4Address&quot;: &quot;172.18.0.3/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            },
            &quot;a67817bd09f75248318114d41f47e374f68c8e8fe5793b95676ecff4902a9a90&quot;: {
                &quot;Name&quot;: &quot;jackett&quot;,
                &quot;EndpointID&quot;: &quot;08ea48706e18be4f015dbf6bbc46c399de5df030bab9e37a49515cd93104d1f7&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:12:00:09&quot;,
                &quot;IPv4Address&quot;: &quot;172.18.0.9/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            },
            &quot;dec7d4e29970c888d75ab0753f35c11c725988e12fa2fcfaea3c1a9907930beb&quot;: {
                &quot;Name&quot;: &quot;nginx&quot;,
                &quot;EndpointID&quot;: &quot;796070a4b2aff6f4a8731e84235a973a6b8230f612f4bdfe5e0d5b836ee03fc5&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:12:00:06&quot;,
                &quot;IPv4Address&quot;: &quot;172.18.0.6/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            },
            &quot;ded46e3f9aa270510bc8a70fa8297fdfec5bc36fd2cec97a29ce6dc6cfe786c4&quot;: {
                &quot;Name&quot;: &quot;podgrab&quot;,
                &quot;EndpointID&quot;: &quot;77021bda9e8d1f319b9c90738f800d2d1e1ce373307932e7e35a4fe94086b820&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:12:00:0c&quot;,
                &quot;IPv4Address&quot;: &quot;172.18.0.12/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            },
            &quot;f12ba2c0c05656b5027840e554a1cb52c67c7bd24b15ed1d8d313c5e7eec3ba5&quot;: {
                &quot;Name&quot;: &quot;smokeping&quot;,
                &quot;EndpointID&quot;: &quot;86def6ebc41e601fea7d23d7ab57ef072b90c7424bff3875a21a30a0ce9e174c&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:12:00:02&quot;,
                &quot;IPv4Address&quot;: &quot;172.18.0.2/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            }
        },
        &quot;Options&quot;: {},
        &quot;Labels&quot;: {
            &quot;com.docker.compose.network&quot;: &quot;default&quot;,
            &quot;com.docker.compose.project&quot;: &quot;opt&quot;,
            &quot;com.docker.compose.version&quot;: &quot;1.29.2&quot;
        }
    }
]</pre>
</div></div><p>Take a look at the values it comes back with. We can see that the network subnet is <code>172.18.0.0</code> and that each container has been assigned an IP address on this subnet. </p><p>This network also has DNS so that it can communicate with all containers and all containers can communicate with one another. Docker actually makes a copy of the /etc/resolve.conf file and places it onto each container. This is to ensure they are all aware of the same hosts. </p><p>We can test this out. Let’s jump into the shell of one of the available Docker containers, and try and ping another container.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">docker exec -it podgrab sh</pre>
</div></div><p>We’ve now logged into the podgrab container. As you can see, this container only has it’s eth0 network interface exposed which is the connection currently hosted by a virtual ethernet interface on the network bridge. </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">/api # ip add
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
54: eth0@if55: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue state UP 
    link/ether 02:42:ac:12:00:0c brd ff:ff:ff:ff:ff:ff
    inet 172.18.0.12/16 brd 172.18.255.255 scope global eth0
       valid_lft forever preferred_lft forever</pre>
</div></div><p>From the podgrab container, we can freely ping the deluge container:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">/api # ping 172.18.0.3
PING 172.18.0.3 (172.18.0.3): 56 data bytes
64 bytes from 172.18.0.3: seq=0 ttl=64 time=0.246 ms
64 bytes from 172.18.0.3: seq=1 ttl=64 time=0.251 ms
64 bytes from 172.18.0.3: seq=2 ttl=64 time=0.254 ms
64 bytes from 172.18.0.3: seq=3 ttl=64 time=0.252 ms
64 bytes from 172.18.0.3: seq=4 ttl=64 time=0.245 ms
^C
--- 172.18.0.3 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max = 0.245/0.249/0.254 ms </pre>
</div></div><h1 id="HomeServer,Part4:DockerNetworks-Network2:User-definedbridge.">Network 2: User-defined bridge.</h1><p /><h1 id="HomeServer,Part4:DockerNetworks-Conclusion">Conclusion</h1><p>asdf</p></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p><strong>←  </strong><a href="1900552.html" data-linked-resource-id="1900552" data-linked-resource-version="8" data-linked-resource-type="page">Home Server, Part 3: Docker</a>  </p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p style="text-align: right;"><a href="327719.html" data-linked-resource-id="327719" data-linked-resource-version="17" data-linked-resource-type="page">Home Server, Part 5: Remote Access (Cloudflare and NGINX Proxy Manager)</a> <strong>→ </strong> </p></div>
</div>
</div>
<div class="columnLayout fixed-width" data-layout="fixed-width">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1 id="HomeServer,Part4:DockerNetworks-References">References</h1><ol><li><p><a class="external-link" data-card-appearance="inline" href="https://docs.docker.com/compose/networking/" rel="nofollow">https://docs.docker.com/compose/networking/</a> </p></li></ol><p /></div>
</div>
</div>
</div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1212448/1015858.png">image-20220824-145909.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Nov 11, 2022 08:04</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
