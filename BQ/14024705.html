<!DOCTYPE html>
<html>
    <head>
        <title>Badger Quest : Home Server, Part 2: Ubuntu OS</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Badger Quest</a></span>
                            </li>
                                                    <li>
                                <span><a href="Badger-Quest_229581.html">Badger Quest</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home-Server_720897.html">Home Server</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Badger Quest : Home Server, Part 2: Ubuntu OS
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Lauren Barger</span>, last modified on Oct 18, 2022
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="contentLayout2">
<div class="columnLayout fixed-width" data-layout="fixed-width">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>In the previous article, I set up the hardware for our home server on an Intel NUC. Now that my hardware is prepped, this article will go through the setup for the Ubuntu Server OS which we’ll use for all our hosted services.</p><h1 id="HomeServer,Part2:UbuntuOS-TableofContents">Table of Contents</h1><style type='text/css'>/*<![CDATA[*/
div.rbtoc1668153849500 {padding: 0px;}
div.rbtoc1668153849500 ul {list-style: none;margin-left: 0px;}
div.rbtoc1668153849500 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1668153849500'>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>1</span> <a href='#HomeServer,Part2:UbuntuOS-InstallingUbuntuServer.'>Installing Ubuntu Server.</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>1.1</span> <a href='#HomeServer,Part2:UbuntuOS-Createabootabledrive.'>Create a bootable drive.</a></li>
<li><span class='TOCOutline'>1.2</span> <a href='#HomeServer,Part2:UbuntuOS-InstallingUbuntuServer'>Installing Ubuntu Server</a></li>
</ul>
</li>
<li><span class='TOCOutline'>2</span> <a href='#HomeServer,Part2:UbuntuOS-StaticIPaddress.'>Static IP address.</a></li>
<li><span class='TOCOutline'>3</span> <a href='#HomeServer,Part2:UbuntuOS-SecondaryStorage.'>Secondary Storage.</a></li>
<li><span class='TOCOutline'>4</span> <a href='#HomeServer,Part2:UbuntuOS-Conclusion.'>Conclusion.</a></li>
<li><span class='TOCOutline'>5</span> <a href='#HomeServer,Part2:UbuntuOS-References'>References</a></li>
</ul>
</div><h1 id="HomeServer,Part2:UbuntuOS-InstallingUbuntuServer.">Installing Ubuntu Server.</h1><p>My home server OS of choice is Ubuntu Server. This means we won’t have a frontend and will need to configure everything via terminal. At the time of writing, the most recently released version is <a class="external-link" href="https://discourse.ubuntu.com/t/jammy-jellyfish-release-notes/24668" rel="nofollow">Ubuntu Server 22.04 LTS</a>.</p><h2 id="HomeServer,Part2:UbuntuOS-Createabootabledrive.">Create a bootable drive.</h2><p>In order to install Ubuntu Server onto our NUC we will need to create a bootable drive with the Ubuntu Server ISO. </p><ol><li><p>Our first step is to download the ISO file for Ubuntu Server. <a class="external-link" data-card-appearance="inline" href="https://ubuntu.com/download/server" rel="nofollow">https://ubuntu.com/download/server</a></p></li><li><p>Download your favourite USB flashing software. I typically use Balena Etcher <a class="external-link" href="https://www.balena.io/etcher/" rel="nofollow">https://www.balena.io/etcher/</a></p></li><li><p>Open up your flashing software, select the Ubuntu Server ISO image and select your USB Drive and Flash. </p></li></ol><h2 id="HomeServer,Part2:UbuntuOS-InstallingUbuntuServer">Installing Ubuntu Server</h2><p>Our next step is to install Ubuntu onto our NUC. I followed Ubuntu’s standard installation instructions for the majority of this step. </p><ol><li><p>Insert your bootable USB drive into your NUC and access the BIOS menu. </p><ol><li><p>If you are not automatically directed to the Ubuntu installation media, the Intel boot menu button is F10. Restart the NUC again and hold down F2. </p></li><li><p>If you want to force the NUC to open the boot menu, Press and hold the power button for three seconds. You will be presented with the power button menu. Select <strong>Enter Boot Menu</strong>.</p></li></ol></li><li><p> Complete the installation steps as they appear on your screen. I followed the standard Ubuntu guide for the install <a class="external-link" data-card-appearance="inline" href="https://ubuntu.com/tutorials/install-ubuntu-server#1-overview" rel="nofollow">https://ubuntu.com/tutorials/install-ubuntu-server#1-overview</a>.</p></li><li><p>Ensure that you create a user for yourself with a secure password</p></li></ol><h1 id="HomeServer,Part2:UbuntuOS-StaticIPaddress.">Static IP address.</h1><p>Now that Ubuntu Server is installed, I’m going to configure a static IP address for our server so that we always know where it is. </p><div class="panel" style="background-color: #EAE6FF;border-color: #998DD9;border-width: 1px;"><div class="panelContent" style="background-color: #EAE6FF;">
<p>It is possible to configure a static IP address using your routers DHCP settings, but these settings could be erased by a router swap or ISP change, so we’ll be configuring the static IP via Ubuntu Server.</p>
</div></div><p /><ol><li><p><strong>Identify ethernet interface to set the static IP for.</strong><br/>Use the following command to list the available ethernet interfaces: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">ip link</pre>
</div></div><p><br/>This should list the available network interfaces, and should look something like this: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: eno1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 1c:69:7a:aa:53:72 brd ff:ff:ff:ff:ff:ff
3: wlo2: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/ether 14:85:7f:84:de:1f brd ff:ff:ff:ff:ff:ff</pre>
</div></div><p><br/>The name of the ethernet interface in the above list is <strong>eno1</strong>. <br/></p></li><li><p><strong>Navigate to the Ubuntu Netplan directory.</strong><br/>Navigate to <code>/etc/netplan</code>.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">cd /etc/netplan</pre>
</div></div><p><br/>In this directory there will most likely be multiple different configuration files for the different interfaces available.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">badger@nuc01:/etc/netplan$ ll
total 16
drwxr-xr-x   2 root root 4096 May 17 07:07 ./
drwxr-xr-x 104 root root 4096 Oct 18 06:24 ../
-rw-------   1 root root   74 May 17 05:48 00-installer-config-wifi.yaml
-rw-r--r--   1 root root  256 May 17 07:07 00-installer-config.yaml</pre>
</div></div><p><br/>We are going to update the <code>00-installer-config.yaml</code> file to set the static IP for our ethernet interface.<br/></p></li><li><p><strong>Understanding the Netplan configuration file.</strong><br/>Open the Netplan configuration file to review the contents: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">cat nano 00-installer-config.yaml</pre>
</div></div><p><br/>The file contents should look something like this: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">network:
  version: 2
  renderer: networkd
  ethernets:
    eno1:
      dhcp4: yes</pre>
</div></div><p> <br/>This is the standard format for Netplan configuration files. The configuration starts with a <code>network</code> tag followed by the Netplan version and then the device types. The device type can be <code>ethernets</code>, <code>bonds</code>, <code>bridges</code> or <code>vlans</code>. This config has also set the <code>renderer</code> to the default <code>networkd</code> which comes with Ubuntu Server.<br/><br/>The configuration also specifies that dhcp4 is enabled for our ethernet interface. This means that the IP address of our ethernet interface is being selected dynamically using the DHCP server. This is the configuration we need to change.<br/></p></li><li><p><strong>Configuring a static IP address using the Netplan configuration file.</strong><br/>Open the Netplan configuration file with your text editor of choice: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">sudo nano 00-installer-config.yaml</pre>
</div></div><p><br/>The config that we will set works as follows: <br/><code>dhcp4: no</code>: Disable DHCP IP resolution<br/><code>addresses</code>: The static IPv4 or IPv6 address(s) that will be assigned to the network interface. (192.168.0.10)<br/><code>gateway4</code>: The gateway to use for our selected static IP addresses (Default Gateway: 192.168.0.1)<br/><code>nameservers</code>: The DNS addresses to be used. (Google DNS Servers: 8.8.8.8, 8.8.4.4)<br/><br/>My configuration is as follows:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">network:
  version: 2
  renderer: networkd
  ethernets:
    eno1:
      dhcp4: no
      addresses: [192.168.0.10/24]
      gateway4: 192.168.0.1
      nameservers:
          addresses: [8.8.8.8, 8.8.4.4]</pre>
</div></div><p /></li><li><p><strong>Save the file and apply changes.</strong><br/>Run the following command to apply the network changes that you’ve made:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">sudo netplan apply</pre>
</div></div><p /></li><li><p><strong>Verify changes.</strong><br/>Run the following command to review your changes: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">ip addr show dev eno1</pre>
</div></div><p><br/>In the command output I can see that the assigned address is 192.168.0.10:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">2: eno1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 1c:69:7a:aa:53:72 brd ff:ff:ff:ff:ff:ff
    inet 192.168.0.10/24 brd 192.168.0.255 scope global eno1
       valid_lft forever preferred_lft forever
    inet6 fe80::1e69:7aff:feaa:5372/64 scope link
       valid_lft forever preferred_lft forever</pre>
</div></div></li></ol><h1 id="HomeServer,Part2:UbuntuOS-SecondaryStorage.">Secondary Storage.</h1><p>Our server is going to need some secondary storage to allow us to host a media server. I’m going to just connect a single terabyte hard drive to the NUC and setup automatic volume mounts so that it’s always connected. </p><ol><li><p><strong>Find the device UUID</strong><br/>Once the HDD is connected run the following command to list the connected partitions on the Linux system:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">sudo blkid</pre>
</div></div><p><br/>In the list you should be able to find your HDD details, they should looks something like this: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">badger@nuc01:~$ sudo blkid
/dev/sda1: UUID=&quot;DAED-1AEE&quot; TYPE=&quot;vfat&quot; PARTUUID=&quot;74c0e0f1-f39b-4a5c-9c7d-5fd8f027235f&quot;
/dev/sda2: UUID=&quot;3d7ecb9d-99cc-469d-a547-32b4a5d89322&quot; TYPE=&quot;ext4&quot; PARTUUID=&quot;74d53c9c-a465-4b19-ae3e-1b52b07fa2c6&quot;
/dev/sda3: UUID=&quot;BS73dt-byR6-bfrt-X5qT-N6M5-ANUV-jT42Re&quot; TYPE=&quot;LVM2_member&quot; PARTUUID=&quot;f4459125-cba4-49a4-85c7-bba8fcfdfe87&quot;
/dev/mapper/ubuntu--vg-ubuntu--lv: UUID=&quot;39d0e7aa-dd0d-4d8b-b1fe-d0536d48da4f&quot; TYPE=&quot;ext4&quot;
/dev/sdb1: LABEL=&quot;Dwayne the Rock Hard Drive&quot; UUID=&quot;8A32AB1232AB01F5&quot; TYPE=&quot;ntfs&quot; PARTUUID=&quot;85cef983-01&quot;</pre>
</div></div><p><br/>We can see that the device UUID is <code>8A32AB1232AB01F5</code> and the device type is <code>ntfs</code>. Now that we know the partition name, we can mount the partition on our Ubuntu server.<br/></p></li><li><p><strong>Create a mount point</strong><br/>Ubuntu will require a folder to mount the HDD on. We will create the folder /mnt/media for our HDD mount point: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">sudo mkdir /mnt/media</pre>
</div></div><p /></li><li><p><strong>Automatically mount partition.</strong><br/>Open the file /etc/fstab with your selected text editor. </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">sudo nano /etc/fstab</pre>
</div></div><p><br/>Add the following line to the end of the file and save: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">UUID=8A32AB1232AB01F5 /mnt/media ntfs defaults 0 0</pre>
</div></div><p /></li><li><p><strong>Restart your device</strong><br/>Since the device is now set to automatically connect on start up, a simple restart of the NUC will mount the HDD to your selected partition. </p></li></ol><h1 id="HomeServer,Part2:UbuntuOS-Conclusion.">Conclusion.</h1><p>These are the preliminary steps I followed for the setup of Ubuntu for the home server. Our next steps will include setting up Docker and the beginnings of our home server.</p></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p><strong>←  </strong><a href="2031617.html" data-linked-resource-id="2031617" data-linked-resource-version="10" data-linked-resource-type="page">Home Server, Part 1: Hardware</a> </p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p style="text-align: right;"><a href="1900552.html" data-linked-resource-id="1900552" data-linked-resource-version="8" data-linked-resource-type="page">Home Server, Part 3: Docker</a> <strong>→ </strong> </p></div>
</div>
</div>
<div class="columnLayout fixed-width" data-layout="fixed-width">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1 id="HomeServer,Part2:UbuntuOS-References">References</h1><ol><li><p><a class="external-link" data-card-appearance="inline" href="https://www.homeautomationguy.io/home-assistant-tips/installing-docker-home-assistant-and-portainer-on-ubuntu-linux/" rel="nofollow">https://www.homeautomationguy.io/home-assistant-tips/installing-docker-home-assistant-and-portainer-on-ubuntu-linux/</a>  </p></li><li><p><a class="external-link" data-card-appearance="inline" href="https://ubuntu.com/tutorials/install-ubuntu-server#1-overview" rel="nofollow">https://ubuntu.com/tutorials/install-ubuntu-server#1-overview</a>  </p></li><li><p><a class="external-link" data-card-appearance="inline" href="https://linuxize.com/post/how-to-configure-static-ip-address-on-ubuntu-20-04/" rel="nofollow">https://linuxize.com/post/how-to-configure-static-ip-address-on-ubuntu-20-04/</a>  </p></li><li><p><a class="external-link" data-card-appearance="inline" href="https://askubuntu.com/questions/125257/how-do-i-add-an-additional-hard-drive" rel="nofollow">https://askubuntu.com/questions/125257/how-do-i-add-an-additional-hard-drive</a>  </p></li><li><p><a class="external-link" data-card-appearance="inline" href="https://askubuntu.com/questions/46588/how-to-automount-ntfs-partitions" rel="nofollow">https://askubuntu.com/questions/46588/how-to-automount-ntfs-partitions</a>  </p></li><li><p><a class="external-link" data-card-appearance="inline" href="https://linuxhandbook.com/things-to-do-after-installing-linux-server/" rel="nofollow">https://linuxhandbook.com/things-to-do-after-installing-linux-server/</a>  </p></li></ol><p /></div>
</div>
</div>
</div>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Nov 11, 2022 08:04</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
